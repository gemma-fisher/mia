<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>MIA (Modular Image Analysis)</title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link href="../../../../css/style.css" rel="stylesheet">
  <!-- <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&display=swap" rel="stylesheet">  -->

  <!-- Javascript -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>

</head>

<body>
  <!-- Navigation bar -->
  <nav class="navbar navbar-expand-md navbar-light bg-light sticky-top">
    <div class="container-fluid">
      <!-- <a class="navbar-brand d-none d-sm-block mia-name" href="#"><img height="32" src="img/logo_64.png"
          style="padding-right:8px;">Modular Image Analysis</a>
      <a class="navbar-brand d-block d-sm-none" href="#"><img height="32" src="img/logo_64.png"
          style="padding-right:8px;"></a> -->
      <a class="navbar-brand mia-name" href="../../../../index.html" style="padding-top: 5px;padding-bottom: 0px;"><img
          height="30" src="../../../../img/logo_64.png" style="padding-right:8px;">Modular Image Analysis</a>
      <buton class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        style="border: none;">
        <span class="navbar-toggler-icon"></span>
      </buton>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item ">
            <a class="nav-link" href="../../../../index.html">Home</a>
          </li>
          <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownModules"
              role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Guides</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownModules">
              <a class="dropdown-item" href="../../../../html/gettingstarted.html">Getting started</a>
            </div>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="../../../../html/modules/modules.html">Modules</a>
          </li>
          <!-- <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdownModules" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">Modules</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownModules">
              <a class="dropdown-item" href="../../../../html/modules/modules.html">All categories</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Package 1</a>
              <a class="dropdown-item" href="#">Package 2</a>
              <a class="dropdown-item" href="#">Package 3</a>
            </div>
          </li> -->
          <li class="nav-item ">
            <a class="nav-link" href="../../../../html/about.html">About</a>
          </li>
        </ul>
        <a class="btn btn-outline-primary ml-2"
          href="https://github.com/sjcross/MIA/releases/download/v0.15.9/MIA_-0.15.9.jar">Download</a>
      </div>
    </div>
  </nav>

  <div class="page-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <p class="text-secondary"><a href="../../../../html/modules/modules.html">Modules</a> ➤ <a href="../../../../html/modules/miscellaneous/miscellaneous.html">Miscellaneous</a> ➤ <a href="../../../../html/modules/miscellaneous/macros/macros.html">Macros</a></p>
    <h1 class="display-4">Run macro on image</h1>
    <p class="lead">Run a specific ImageJ macro once (as opposed to the "Run macro on objects" module, which runs once per object).</p>
</div>

<div class="pt-md-2 pb-md-4 mx-auto">
    <h2 class="display-6">Description</h2>
    Run a specific ImageJ macro once (as opposed to the "Run macro on objects" module, which runs once per object).  This module can optionally open an image into ImageJ for the macro to run on.  It can also intercept the output image and store it in the MIA workspace.  Variables assigned during the macro can be extracted and stored as measurements associated with the input image.<br><br>Note: ImageJ can only run one macro at a time, so by using this module the "Simultaneous jobs" parameter of the "Input control" module must be set to 1.<br><br>Note: When this module runs, all windows currently open in ImageJ will be automatically hidden, then re-opened upon macro completion.  This is to prevent accidental interference while the macro is running.  It also allows the macro to run much faster (batch mode).  To keep images open while the macro is running (for example, during debugging) start the macro with the command "setBatchMode(false)".
</div>

<div class="pt-md-2 pb-md-4 mx-auto">
    <h2 class="display-6">Parameters</h2>
    <b>Add variable</b> (default = "") Pre-define variables, which will be immediately accessible within the macro.  These can be used to provide user-controllable values to file-based macros or to prevent the need for editing macro code via the "Run macro on image" panel.<br><b>Variable type</b> (default = "Text") <br><b>Variable name</b> (default = "") The variable value can be accessed from within the macro by using this variable name.<br><br><b>Variable checkbox</b> (default = "true") <br><br><b>Variable numeric value</b> (default = "0.0") <br><br><b>Variable text value</b> (default = "") Text value assigned to this variable.<br><br><br><b>Provide input image</b> (default = "true") When selected, a specified image from the workspace will be opened prior to running the macro.  This image will be the "active" image the macro runs on.<br><br><b>Input image</b> (default = "") If "Provide input image" is selected, this is the image that will be loaded into the macro.  A duplicate of this image is made, so the image stored in the workspace will not be affected by any processing in the macro.  The final active image once the macro has completed can be stored in the workspace using the "Intercept output image" parameter.<br><br><b>Macro mode</b> (default = "Macro text") Select the source for the macro code:<br><ul><li>"Macro file" Load the macro from the file specified by the "Macro file" parameter.</li><li>"Macro text" Macro code is written directly into the "Macro text" box.</li></ul><br><b>Macro text</b> (default = "// A variable has been pre-defined for the input image name.

run("Enable MIA Extensions");

") Macro code to be executed.  MIA macro commands are enabled using the "run("Enable MIA Extensions");" command which is included by default.  This should always be the first line of a macro if these commands are needed.<br><br><b>Macro file</b> (default = "") Select a macro file (.ijm) to run once, after all analysis runs have completed.<br><br><b>Intercept output image</b> (default = "true") When selected, the image currently active in ImageJ at completion of the macro can be stored into the workspace.  This can either overwrite the input image in the workspace or be stored as a new image (controlled by "Apply to input image").<br><br><b>Apply to input image</b> (default = "true") When this and "Intercept output image" are selected, the image active in ImageJ at completion of the macro will update the input image in the MIA workspace.  Otherwise, the actie image will be stored as a new image in the workspace with the name specified by "Output image".<br><br><b>Output image</b> (default = "") When "Intercept output image" is selected, but not updating the input image, the image active in ImageJ at completion of the macro will be stored in the MIA workspace with this name.  This image will be accessible to other modules using this name.<br><br><b>Intercept variable as measurement</b> (default = "") This allows variables assigned in the macro to be stored as measurements associated with the input image.<br><b>Variable</b> (default = "") Variable assigned in the macro to be stored as a measurement associated with the input image.  This name must exactly match (including case) the name as written in the macro.<br><br><br>
</div>

  <!-- Footer -->
  <footer>
    <div class="container-fluid padding">
      <div class="row text-center text-light align-items-center">
        <div class="col-6 mt-4 mb-4">
          <a href="http://www.bristol.ac.uk/wolfson-bioimaging/">
            <img height="48" src="../../../../img/wbif.png">
          </a>
        </div>
        <div class="col-6 mt-4 mb-4 align-items-center">
          <a href="https://github.com/sjcross/MIA/">
            <img height="48" src="../../../../img/GitHub-Mark-Light-64px.png"><img height="32"
              src="../../../../img/GitHub_Logo_White.png" height="32px">
          </a>
        </div>
      </div>
    </div>
  </footer>

  <script src="../../../../js/script.js" type="text/javascript"></script>

</body>

</html>