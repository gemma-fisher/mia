<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>MIA (Modular Image Analysis)</title>
  <link rel="shortcut icon" href="../../../../img/logos/logo_square_partclip_192.png" type="image/x-icon" />

  <!-- CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link href="../../../../css/style.css" rel="stylesheet">

  <!-- Javascript -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>
</head>

<body>
  <!-- Navigation bar -->
  <nav class="navbar navbar-expand-md navbar-light bg-light sticky-top">
    <div class="container-fluid">
      <div>
        <a class="navbar-brand" href="../../../../index.html" style="padding-bottom: 0px;">
          <img height="36" src="../../../../img/logos/logo_64.png" style="padding-bottom: 3px; padding-right:0px;">
        </a>
        <a class="navbar-brand mia-name mia-mobile" href="../../../../index.html" style="float:right; padding-top: 6px;">
          MIA
        </a>
        <a class="navbar-brand mia-name mia-desktop" href="../../../../index.html" style="float:right; padding-top: 6px;">
          Modular Image Analysis
        </a>
      </div>
      <buton class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        style="border: none;">
        <span class="navbar-toggler-icon"></span>
      </buton>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item ">
            <a class="nav-link" href="../../../../index.html">Home</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="../../../../html/guides/guides.html">Guides</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="../../../../html/modules/modules.html">Modules</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="../../../../html/about.html">About</a>
          </li>
          <a class="btn btn-outline-primary ml-2 mia-nav-button"
            href="../../../../html/guides/1gettingstarted.html">Get
            started</a>
      </div>
      </ul>
    </div>
    </div>
  </nav>

  <div class="page-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <p class="mia-main-text"><a href="../../../../html/modules/modules.html">Modules</a> > <a href="../../../../html/modules/images/images.html">Images</a> > <a href="../../../../html/modules/images/transform/transform.html">Transform</a></p>
    <p class="mia-title">Focus stack</p>
    <p class="mia-main-text-large">Focuses a Z-stack into a single plane using the StackFocuser Fiji plugin.</p>
</div>

<div class="mia-text-block mx-auto mia-page">
    <p class="text-center mia-heading">Description</p>
    <p class="text-center mia-main-text">Focuses a Z-stack into a single plane using the StackFocuser Fiji plugin.  Best focus position is determined at each 2D pixel location, with the final image being comprised of the pixels from the slice with the best focus at that location.  Each channel and timepoint is focused separately.  Prior to application, the focus map can be median filtered to remove outliers.  Height maps can be stored and used in additional "Focus stack" instances, thus allowing height maps to be edited prior to use.<br><br>Uses the <a href="https://imagej.nih.gov/ij/plugins/download/Stack_Focuser_.java">StackFocuser</a> plugin created by Mikhail Umorin (source code downloaded on 06-June-2018).</p>
</div>

<div class="mia-text-block mx-auto mia-page">
    <p class="text-center mia-heading">Parameters</p>
    <!-- <p class="text-center mia-main-text"><tr><td class="mia-table-text-bold">Input image</td><td>Image stack from the workspace which will be focused into a single plane.</td></tr><tr><td class="mia-table-text-bold">Output focused image</td><td>Output focused image which will be added to the workspace.  This image will have the same number of channels and timepoints as the input image, but will always only have a single Z-slice.</td></tr><tr><td class="mia-table-text-bold">Add height map image to workspace</td><td>When selected, the height map image will be added to the workspace with the name specified by "Output height image".  Since the height map image can be used as an input to the "FocusStack" module, the height map can be edited prior to being used to generate a focused image.</td></tr><tr><td class="mia-table-text-bold">Output height image</td><td>If "Add height map image to workspace" is selected, the height map will be added to the workspace with this name.  The height map image has a single slice and equal number of channels and timepoints to the input image.  The value of each pixel corresponds to the best-focused Z-position of the input stack.  Slice indices are zero-indexed (i.e. first slice has an index of 0).</td></tr><tr><td class="mia-table-text-bold">Use existing height image</td><td>When selected, the height map image will be loaded from the workspace ("Input height image" parameter) rather than being calculated based on the input image.</td></tr><tr><td class="mia-table-text-bold">Input height image</td><td>The name of the height map image in the workspace if the height map has been pre-determined.</td></tr><tr><td class="mia-table-text-bold">Range</td><td>If calculating a new height image ("Use existing height image" parameter isn't selected), the best focus slice at each pixel will be based on pixel intensities within this range (specified in pixel units).</td></tr><tr><td class="mia-table-text-bold">Smooth height map</td><td>When selected, the height map will be passed through a 2D median filter (range specified by "Range" parameter) to remove outliers.</td></tr></p> -->
    <table class="table table-striped">
        <thead class="mia-main-text-small mia-bold">
            <tr>
                <td>Parameter</td>
                <td>Description</td>
            </tr>
        </thead>
        <tbody class="mia-main-text-small">
            <tr><td class="mia-table-text-bold">Input image</td><td>Image stack from the workspace which will be focused into a single plane.</td></tr><tr><td class="mia-table-text-bold">Output focused image</td><td>Output focused image which will be added to the workspace.  This image will have the same number of channels and timepoints as the input image, but will always only have a single Z-slice.</td></tr><tr><td class="mia-table-text-bold">Add height map image to workspace</td><td>When selected, the height map image will be added to the workspace with the name specified by "Output height image".  Since the height map image can be used as an input to the "FocusStack" module, the height map can be edited prior to being used to generate a focused image.</td></tr><tr><td class="mia-table-text-bold">Output height image</td><td>If "Add height map image to workspace" is selected, the height map will be added to the workspace with this name.  The height map image has a single slice and equal number of channels and timepoints to the input image.  The value of each pixel corresponds to the best-focused Z-position of the input stack.  Slice indices are zero-indexed (i.e. first slice has an index of 0).</td></tr><tr><td class="mia-table-text-bold">Use existing height image</td><td>When selected, the height map image will be loaded from the workspace ("Input height image" parameter) rather than being calculated based on the input image.</td></tr><tr><td class="mia-table-text-bold">Input height image</td><td>The name of the height map image in the workspace if the height map has been pre-determined.</td></tr><tr><td class="mia-table-text-bold">Range</td><td>If calculating a new height image ("Use existing height image" parameter isn't selected), the best focus slice at each pixel will be based on pixel intensities within this range (specified in pixel units).</td></tr><tr><td class="mia-table-text-bold">Smooth height map</td><td>When selected, the height map will be passed through a 2D median filter (range specified by "Range" parameter) to remove outliers.</td></tr>
        </tbody>
    </table>
</div>

  <!-- Footer -->
  <footer>
    <div class="container-fluid padding mia-page">
      <div class="row text-light">
        <div class="col-6 mia-footer">
          <a href="http://www.bristol.ac.uk/wolfson-bioimaging/">
            <img class="mia-footer-logo" src="../../../../img/logos/wbif.png">
          </a>
        </div>
        <div class="col-6 mia-footer text-right">
          <a href="https://github.com/mianalysis/mia/">
            <img class="mia-footer-logo" src="../../../../img/logos/GitHub-Mark-Light-64px.png"><img height="32"
              src="../../../../img/logos/GitHub_Logo_White.png" height="32px">
          </a>
        </div>
      </div>
    </div>
  </footer>

  <script src="../../../../js/script.js" type="text/javascript"></script>

</body>

</html>